# Plan for decoupling velut from Excel

For context, see [this project’s readme](https://github.com/DuncanRitchie/velut#readme). If none of this makes sense to you, I apologize.

I’ve already made several webpages made with vanilla HTML/CSS/JavaScript that I use to manage velut, in addition to the gigantic Excel file. I’ll probably be making more webpages to fulfil the steps below. The steps are in chronological order.

- [x] Port velut to Next.js. <ins>Completed 2022-07-23.</ins>
- [x] Decide whether to cancel my Render subscription for serving the MERN version. <ins>Subscription suspended 2022-09-10.</ins>
- [ ] Make a webpage (or similar) that replaces the Excel sheet `wordsform`, which generates the phonetic data (etc) for each word. (Top-right in the [Excel screenshot](https://github.com/DuncanRitchie/velut#excel) in the readme.) It doesn’t need database access.
- [ ] For each lemma in velut, generate the list of forms already in velut. This should be something that can be repeated easily whenever I add to the Excel file. A webpage that has `<textarea>`s for relevant data would suffice. Name it the Excel Forms Collator (or something better).
- [ ] Export the manually-entered data of `lemmata` into Json. (This is the Excel sheet bottom-left in the screenshot.)
- [ ] Write something that generates an empty list for each lemma. Name it the Inflector.
- [ ] Write tests that compare the output of the Excel Forms Collator (the lists of forms already in velut) to the output of the Inflector (a set of empty lists, at this point in time). The tests will fail for all lemmata.
- [ ] Make the Inflector return the lemma for conjunctions and prepositions, which will make some tests pass.
- [ ] Make the Inflector return the forms for each lemma as an object containing all parsing data. I don’t want an array of simple strings (`["amō","amās","amat",...]`) for each lemma, but something more like this (for a verb):<br>
      ```
          {
            "unencliticized": {
              "indicative": {
                "active": {
                  "present": {
                    "singular": {
                      "1st": ["amō"],
                      "2nd": ["amās"],
                      "3rd": ["amat"]
                    }
                  }
                }
              }
            }
          }
      ```
- [ ] Make sure tests can handle what the Inflector generates. If the Excel Forms Collator gives `["amō","amās","amat"]` and the Inflector gives the object above, the tests should pass because the forms are the same. Order does not matter.
- [ ] Handling for enclitics — make it so that all forms (where relevant) generated by the Inflector have encliticized forms as well as the unencliticized form. The enclitics in Latin are ‘[-que](https://www.velut.co.uk/-que)’, ‘[-ne](https://www.velut.co.uk/-ne)’, and ‘[-ve](https://www.velut.co.uk/-ve)’. (Exemptions include conjunctions and lemmata already ending in “-que” such as ‘‘[quisque](https://www.velut.co.uk/quisque)’’. The word ‘ūsquene’ is attested, however.)
- [ ] Add whatever special cases need to be added to make all the tests pass for conjunctions and prepositions. (Because some conjunctions/prepositions have forms other than the lemma.)
- [ ] Make the Inflector generate the positive/comparative/superlative forms for adverbs. (Some adverbs will need to be marked as not having comparative/superlatives. There may be other special cases too.)
- [ ] Make the Inflector generate the forms for adjectives. (Some adjectives will need to be marked as not having comparative/superlatives/etc. There may be other special cases too.)
- [ ] Continue for pronouns, nouns, verbs, etc.
- [ ] Generated forms may be added back to the Excel file, but this is not necessary.
- [ ] Eventually the list of words in Excel will match that generated by the Inflector, or at least be a subset thereof. (Order does not matter.) Tests will pass.
- [ ] Stop adding words to the Excel file.
- [ ] Run all generated inflections through the replacement for the `wordsform` sheet.
- [ ] Replace `words` collection in MongoDB with the output of the previous step.
- [ ] Add the parsing data generated by the Inflector to a new MongoDB collection.
- [ ] Add inflection-tables on front-end, using the output of the Inflector.<br>
      An example from Wiktionary:<br>
      ![Declension table for the noun ‘verbum’, with singular and plural forms for the six grammatical cases](https://github.com/DuncanRitchie/velut-screenshots/blob/main/compressed/wiktionary-declension-table.png)
- [ ] Decide whether inflection-tables should include encliticized forms.
- [ ] Ensure everything in Excel file exists outside of it.
- [ ] Evaluate whether Excel file can be deprecated.
- [ ] Continue adding words and going through issues. (I have several private Trello boards, including one for velut.)
